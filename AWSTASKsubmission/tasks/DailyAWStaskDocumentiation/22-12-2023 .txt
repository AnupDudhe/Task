NGINX JUMP SERVER CONFIG 

Nginx and jump server configuration

The outcome of this task is to ensure that you have 2 servers
1 server -  you main webserver with database in it and nginx configured with it as well
2 server - with nginx configured in it 
you need 1 loadbalancer on 80 HTTP
you need target group on 80 HTTP
LB must be Internet Facing


create nginx jump server in 1 instance(where your studenapp is already installed )
then 1 instance with jump server which has nginx configured in it ,
other instance with student app the ip you hit of jump server you should get hosting of student app
so basically in jump server we just need nginx installed and configured in Jump server.i


ensure security group has
8080
3306
80
22


in lb
in instances(jump and app server both)
in rds





***configuration on web application server (web-application server)
ensure your tomcat is properly configured
ensure your mariadb is properly configured on the server it self or on rds
now you have nginx installation in it

yum install nginx -y
ensure you catalina.sh has started
ensure mariadb or rds mariadb both are active and started.

now we need to ensure our nginx is configured in such way that nginx will jump the 80 requests from client and these requests will be forwared to our 8080 tomcat server

for that all we need to do is  

this is our nginx config on main webserver
make following changes in /etc/nginx/nginx.conf

 
 43         # Load configuration files for the default server block.
 44         include /etc/nginx/default.d/*.conf;
 45 
 46         location / {
 47         proxy_pass  http://localhost:8080/student/;
 48         }
 49         error_page 404 /404.html;
 50         location = /404.html {
 51         }
 52 
 53         error_page 500 502 503 504 /50x.html;
 54         location = /50x.html {








**Jump server nginx configurations

how to create a load balancer
ensure load balancer is application
ensure you have internet facing
ensure its http:80
target group has main tomcat server associated
ensure this target group is added as listen rule in loadbalancer.


yum install nginx -y

go to /etc/nginx/nginx.conf
here add a script on 46th line with loadbalancer dns in it and ensure you have "/" added at the end of loadbalacer. 
just start nginx once

under line no 44th 
         # Load configuration files for the default server block.
 44         include /etc/nginx/default.d/*.conf;
 45 
 46         location /{
 47          proxy_pass http://newlb-949098419.ap-south-1.elb.amazonaws.com/;
 48 
 49         }

hit ip of our nginx jump server public ip and you will get our student app website

nginx -v -- to check version












